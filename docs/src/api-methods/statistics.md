# Работа со статистикой

## Статистика

:::info
_POST_ `report/tgview`

Пример использования:
```http request
https://client.adstat.pro/api/report/tgview
```

__Параметры:__

В заголовках HTTP запроса необходимо передать `<access_token>` в формате:
+ `Authorization: "Bearer <access_token>" `

В тело(`body`) HTTP запроса необходимо передать параметры получения статистики.

Описание параметров передаваемых в тело запроса:

| Поле               | Тип             | Описание                                                                                                                                                                                                                                                                                                                                                     |
|--------------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `date`             | Объект          | Интервал дат, определяющий временной период запроса.                                                                                                                                                                                                                                                                                                         |
| `date.date_from`   | Строка          | Начальная дата и время в формате ISO 8601 (например, "2024-06-07T00:00:00.000Z").                                                                                                                                                                                                                                                                            |
| `date.date_to`     | Строка          | Конечная дата и время в формате ISO 8601 (например, "2024-06-07T23:59:59.000Z").                                                                                                                                                                                                                                                                             |
| `platform`         | Массив чисел    | Статичное значение равное всегда `[10]`.                                                                                                                                                                                                                                                                                                                     |
| `partner`          | Массив чисел    | Статичное значение равное всегда `[2]`.                                                                                                                                                                                                                                                                                                                      |
| `campaign`         | Массив          | Список идентификаторов кампаний. Может быть пустым массивом, если нужно получить данные по всем кампаний.                                                                                                                                                                                                                                                    |
| `group_time`       | Число           | Параметр группировки по времени. Значения:<br/> День- `1`,<br/> Месяц - `2`, <br/>Неделя - `3`, <br/>Год - `4`.                                                                                                                                                                                                                                              |
| `groupings`        | Массив объектов | Список объектов группировки данных. Каждый объект определяет параметр группировки.                                                                                                                                                                                                                                                                           |
| `groupings.name`   | Строка          | Имя параметра для группировки (например, `"date"`, `"object"` итд ).                                                                                                                                                                                                                                                                                         |
| `groupings.type`   | Число           | Тип группировки для параметра. Используется только для некоторых группировок (например, `1`).                                                                                                                                                                                                                                                                |
| `object`           | Массив          | Список идентификаторов объектов рекламирования для плучения статистики по выбранным объектам. `["t.me/someobject", "..."]`. Если нужно получить по всем объектам, то значение - `[]`. <br/>Список объектов рекламирования можно получить в [Список объектов рекламирования](#objects)                                                                        |
| `sub_client`       | Массив          | Внутренний параметр для технических нужд.                                                                                                                                                                                                                                                                                                                    |
| `type_cab`         | null            | Тип кабинета. Статичное значение - всегда `null`.                                                                                                                                                                                                                                                                                                            |
| `currency`         | Строка          | Валюта, в которой будут представлены данные. Статичное значение - всегда `RUB`                                                                                                                                                                                                                                                                               |
| `account_uids`     | Массив          | Список идентификаторов кабинетов, предназначенный для фильтрации статистики по отдельным кабинетам.Может быть пустым массивом `[]`, если нужно получить данные по всем кабинетам. Если по отдельным кабинетам - `["ACC0000", "..."]`. <br/>Список содержащий `account_uids` кабинетов можно получить в [Список кабинетов](/api-methods/cabinets.md#cabinets) |

Подробное описание и примеры использования параметров в теле запроса:

`groupings` :

+ Значение, когда необходимо получить статистику сгруппированную только по дате:
```json
{
  "others_params": "others params",
  "groupings":[{"name":"date","type": "<group_time>"}],
  "..": "others params"
}
```
+ Значение, когда необходимо получить статистику сгрупированную по -

`Объекту рекламирования` - `{"name": "object"}`,

`По объявлению` - `{"name": "campaign"}`,

`По кабинету` - `{"name": "account", "type": 1}`


```json
{
  "others_params": "others params",
  "groupings":[{"name": "object"}, {"name": "campaign"}, {"name": "account", "type": 1}, {"name": "date", "type": "<group_time>"}],
  "..": "others params"
}
```


Пример тела запроса:

```json
{
  "date": {
    "date_from": "2024-06-07T00:00:00.000Z",
    "date_to": "2024-06-07T23:59:59.000Z"
  },
  "platform": [
    10
  ],
  "partner": [
    2
  ],
  "campaign": [],
  "group_time": 1,
  "groupings": [
    {
      "name": "date",
      "type": 1
    },
    {
      "name": "partner"
    },
    {
      "name": "platform"
    },
    {
      "name": "sub_client"
    }
  ],
  "object": [],
  "sub_client": [],
  "type_cab": null,
  "currency": "RUB",
  "account_uids": []
}
```


__Пример успешного ответа:__
```json
{
  "results": [
    {
      "date": "2024-06-09",
      "unit": 1016091001563,
      "campaign_plat": "example campaign plat",
      "ad_text": "example ad_text",
      "target_topics": [
        "Offers & Promotions"
      ],
      "target_channels": [],
      "target_langs": [
        "Russian"
      ],
      "spent": 0.004,
      "impressions": 1.0,
      "goals": 0.0,
      "price_target": 0.0,
      "cpm": 1.33,
      "object": "t.me/example",
      "account_uid": "ACC0000000",
      "account_name": "SOME_Test",
      "target_countries": [],`
      "target_user_locations": [],
      "target_user_channels": [],
      "ad_type": "target_channels",
      "ad_id": 999999999,
      "clicks": 0,
      "cpc": 0.0,
      "ctr": 0.0,
      "promote_url": "t.me/example",
      "website_name": null
    }
  ]
}
```

__Описание параметров успешного ответа:__

| Поле                    | Тип          | Описание                                                    |
|-------------------------|--------------|-------------------------------------------------------------|
| `date`                  | Строка       | Дата в формате "YYYY-MM-DD".                                |
| `unit`                  | Число        | Внутренний параметр для технических нужд.                   |
| `campaign_plat`         | Строка       | Наименование объявления.                                    |
| `ad_text`               | Строка       | Текст креатива.                                             |
| `target_topics`         | Массив строк | Список топиков, на которые таргетируется объявление.        |
| `target_channels`       | Массив строк | Список каналов, на которые таргетируется объявление.        |
| `target_langs`          | Массив строк | Список языков, на которые таргетируется объявление.         |
| `spent`                 | Число        | Расходы.                                                    |
| `impressions`           | Число        | Количество показов объявления.                              |
| `goals`                 | Число        | Цели.                                                       |
| `price_target`          | Число        | Цена за цель.                                               |
| `cpm`                   | Число        | Стоимость тысячи показов (CPM).                             |
| `object`                | Строка       | Объект рекламирования.                                      |
| `account_uid`           | Строка       | Уникальный идентификатор аккаунта.                          |
| `account_name`          | Строка       | Название аккаунта.                                          |
| `target_countries`      | Массив строк | Список стран, на которые таргетируется объявление.          |
| `target_user_locations` | Массив строк | Список местоположений, на которые таргетируется объявление. |
| `target_user_channels`  | Массив строк | Список каналов, на которые таргетируется объявление.        |
| `ad_type`               | Строка       | Тип объявления. `"target_channels"`, `target_users`.        |
| `ad_id`                 | Число        | Уникальный идентификатор объявления.                        |
| `clicks`                | Число        | Клики.                                                      |
| `cpc`                   | Число        | Стоимость за клик (CPC).                                    |
| `ctr`                   | Число        | Коэффициент кликабельности (CTR).                           |
| `promote_url`           | Строка       | Конечный URL рекламируего объекта.                          |
| `website_name`          | Строка       | Название вебсайта.                                          |

:::


## <span id="objects">Список объектов рекламирования</span>
:::info
_GET_ `report/objects`

Пример использования:
```http request
https://client.adstat.pro/api/report/objects
```

__Параметры:__

В заголовках HTTP запроса необходимо передать `<access_token>` в формате:
+ `Authorization: "Bearer <access_token>" `

__Пример успешного ответа:__
```json
[
  "t.me/object",
  "https://example.ru"
]
```
:::





